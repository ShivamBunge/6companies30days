class Solution:
    def maxProbability(self, n: int, edges: List[List[int]], succProb: List[float], start: int, end: int) -> float:
        self.g=defaultdict(set)
        for (x,y),z in zip(edges,succProb):
            self.g[x].add((y,z))
            self.g[y].add((x,z))
        heap=[(-1,start)]
        from heapq import heappush, heappop
        
        prob=[0]*n
        prob[start]=1
        while heap:
            curr_prob, node = heappop(heap)
            if prob[node] > -curr_prob: continue  #checks for visited nodes 
            for nei, p in self.g[node]:
                if prob[node]*p > prob[nei]:
                    prob[nei] = prob[node]*p
                    heappush(heap, (-prob[nei], nei))
        
        return prob[end]